import { StatusBar } from 'expo-status-bar';
import React, { useEffect } from 'react';
import { StyleSheet, Text, View, Button} from 'react-native';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';


import OnboardingScreen from './screens/OnboardingScreen';
import LoginScreen from './screens/LoginScreen';
import resetPasswordScreen from './screens/resetPasswordScreen';
import RegistrationScreen from './screens/RegistrationScreen';
import AsyncStorage from '@react-native-async-storage/async-storage';

const AppStack = createNativeStackNavigator();

export default function App() {

  //validation variable for firstLaunch for onboarding state
  const [isFirstLaunch, setIsFirstLaunch] = React.useState(null);

  useEffect(() => {
    AsyncStorage.getItem('alreadyLaunched').then(value => {
      if(value == null){
        AsyncStorage.setItem('alreadyLaunched','true');
        setIsFirstLaunch(true);
      }else{
        setIsFirstLaunch(false); 
      }
    });
  },[]);


  if( isFirstLaunch === null){
    return null;
  }else if( isFirstLaunch === true){
    return (
      <NavigationContainer >
      <AppStack.Navigator initialRouteName="Onboarding">
        <AppStack.Screen options={{headerShown: false}}  name="Onboarding" component={OnboardingScreen} />
        <AppStack.Screen options={{headerShown: false}} name="Login" component={LoginScreen} />
        <AppStack.Screen options={{headerShown: false}} name="resetPasswordScreen" component={resetPasswordScreen} />
        <AppStack.Screen options={{headerShown: false}} name="RegistrationScreen" component={RegistrationScreen} />
      </AppStack.Navigator>
    </NavigationContainer>
    );
  }
    else{
      return <LoginScreen/>
  }

}

